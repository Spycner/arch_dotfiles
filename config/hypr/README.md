# Hyprland Configuration

This directory contains a modular Hyprland configuration that can be easily deployed on new machines using symlinks.

## Structure

```
config/hypr/
├── hyprland.conf           # Main configuration file
├── conf.d/                 # Modular configuration components
│   ├── input.conf          # Keyboard, mouse, and touchpad settings
│   ├── appearance.conf     # Colors, animations, and decorations
│   ├── keybinds.conf      # All keybindings and hotkeys
│   └── windowrules.conf   # Window rules and workspace settings
├── scripts/               # Lightweight system scripts
│   └── reload-config.sh   # Quick config reload script
└── README.md              # This file
```

## Features

- **Modular Design**: Configuration split into logical components for easy maintenance
- **Clean Structure**: No autogenerated warnings or bloat
- **Symlink-Based**: Uses symlinks for easy updates and version control
- **Python Setup Script**: Robust installation with backup and rollback capabilities

## Installation

### Automated Setup (Recommended)

Use the Python setup script for a complete installation:

```bash
# Preview changes (recommended first run)
uv run scripts/setup_hyprland.py --dry-run

# Install configuration
uv run scripts/setup_hyprland.py

# If something goes wrong, rollback
uv run scripts/setup_hyprland.py --rollback
```

### Manual Setup

If you prefer manual installation:

```bash
# Create config directory
mkdir -p ~/.config/hypr

# Create symlinks
ln -sf "$(pwd)/config/hypr/hyprland.conf" ~/.config/hypr/hyprland.conf
ln -sf "$(pwd)/config/hypr/conf.d" ~/.config/hypr/conf.d
ln -sf "$(pwd)/config/hypr/scripts" ~/.config/hypr/scripts

# Reload Hyprland
hyprctl reload
```

## Configuration Components

### Main Configuration (`hyprland.conf`)

Contains:
- Monitor setup
- Program definitions ($terminal, $fileManager, etc.)
- Autostart applications
- Environment variables
- Permission settings
- Source statements for modular components

### Input Configuration (`conf.d/input.conf`)

Contains:
- Keyboard layout and options
- Mouse sensitivity settings
- Touchpad configuration
- Gesture settings
- Per-device overrides

### Appearance Configuration (`conf.d/appearance.conf`)

Contains:
- Window gaps and borders
- Colors and gradients
- Blur and shadow effects
- Animation curves and timings
- Misc visual settings

### Keybindings (`conf.d/keybinds.conf`)

Contains:
- Application launching shortcuts
- Window management binds
- Workspace switching
- Media controls
- System functions

### Window Rules (`conf.d/windowrules.conf`)

Contains:
- Layout settings (dwindle/master)
- Window behavior rules
- Workspace rules
- Application-specific overrides

## Customization

### Adding New Configurations

1. Create a new `.conf` file in `conf.d/`
2. Add content using Hyprland syntax
3. Source the file in `hyprland.conf`:
   ```
   source = ~/.config/hypr/conf.d/your-new-file.conf
   ```

### Modifying Existing Settings

Edit the appropriate file in `conf.d/` and run:
```bash
hyprctl reload
```

### Adding System Scripts

Place lightweight bash scripts in the `scripts/` directory for hotkey integration:

```bash
# Example: Add to scripts/my-script.sh
#!/bin/bash
echo "Hello from Hyprland!"

# Make executable
chmod +x scripts/my-script.sh

# Use in keybinds.conf
bind = $mainMod, F12, exec, ~/.config/hypr/scripts/my-script.sh
```

## Backup and Recovery

The Python setup script automatically creates timestamped backups of your existing configuration in:
```
~/.local/share/arch_dotfiles/backups/
```

### Manual Backup

```bash
# Backup current config
cp -r ~/.config/hypr ~/.config/hypr.backup.$(date +%Y%m%d_%H%M%S)
```

### Rollback

```bash
# Using the setup script
uv run scripts/setup_hyprland.py --rollback

# Or manually
rm -rf ~/.config/hypr
mv ~/.config/hypr.backup.TIMESTAMP ~/.config/hypr
```

## Troubleshooting

### Configuration Not Loading

1. Check symlinks are correct:
   ```bash
   ls -la ~/.config/hypr/
   ```

2. Verify source files exist:
   ```bash
   ls -la ~/.config/hypr/conf.d/
   ```

3. Check Hyprland logs:
   ```bash
   journalctl -f -u hyprland
   ```

### Syntax Errors

Use Hyprland's built-in validation:
```bash
hyprctl reload
```

Check for error messages in the output.

### Symlinks Broken

Re-run the setup script:
```bash
uv run scripts/setup_hyprland.py
```

## Development Workflow

When modifying configurations:

1. **Test changes**: Edit files and run `hyprctl reload`
2. **Validate**: Ensure no syntax errors
3. **Commit**: Add changes to git when satisfied
4. **Deploy**: Use setup script on other machines

## Integration with Dotfiles Repository

This configuration is designed to integrate with the broader Arch dotfiles repository:

- Configuration files are version controlled
- Setup script follows repository conventions
- Backup/rollback system prevents data loss
- Modular design allows selective adoption

## Dependencies

- **Hyprland**: Window manager (obviously!)
- **uv**: Python package manager for running setup scripts
- **Python 3.8+**: For the setup script (managed by uv)
- **jq**: For JSON parsing in some scripts (optional)
- **kitty**: Default terminal (configurable)
- **fuzzel**: Default application launcher with Catppuccin Latte theme (configurable)
- **dolphin**: Default file manager (configurable)

## Contributing

When adding new features:

1. Follow the modular structure
2. Add appropriate documentation
3. Test with both setup methods
4. Ensure rollback compatibility